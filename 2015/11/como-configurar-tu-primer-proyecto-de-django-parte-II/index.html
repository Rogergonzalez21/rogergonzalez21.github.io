<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="http://rogerandresgonzalez.com.ve/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="http://rogerandresgonzalez.com.ve/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="http://rogerandresgonzalez.com.ve/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">
  <link rel="stylesheet" type="text/css" href="http://rogerandresgonzalez.com.ve/theme/css/font-awesome.min.css">
  <link rel="shortcut icon" href="http://rogerandresgonzalez.com.ve/images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="http://rogerandresgonzalez.com.ve/images/favicon.ico" type="image/x-icon">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Roger Andrés González">
  <meta name="description" content="Posts and writings by Roger Andrés González">


<meta name="keywords" content="django, python">

  <title>
    Roger Andrés González - rogerandresgonzalez.com.ve
&ndash; ¿Cómo configurar tu primer proyecto de Django? Parte II  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69257856-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside class="gray_background">
    <div id="user_meta">
      <a href="http://rogerandresgonzalez.com.ve">
        <img src="http://rogerandresgonzalez.com.ve/images/yo.png" alt="logo">
        </a>
        <h2><a href="http://rogerandresgonzalez.com.ve">Roger Andrés González</a></h2>
        <p>Pythonista. Love to eat. Critic. Music lover. Always wanting to learn more.</p>
        <ul>
        <ul class="social">
        <li><a class="sc-linkedin white" href="https://ve.linkedin.com/in/rogergonzalez21" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github white" href="https://github.com/Rogergonzalez21" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-envelope-o white" href="mailto:rogergonzalez21@gmail.com" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
        </ul>
      </ul>
    </div>
  </aside>

  <main>

    <header>
      <p>
        / <a href="http://rogerandresgonzalez.com.ve">Home</a> /
        <a href="/pages/about/">About</a> /
        <a href="/pages/curriculum/">Curriculum Vitae</a> /
        <a href="/archives/">Archive</a> /
        <a href="/category/">Category</a> /
        <a href="/tag/">Tags</a> /
        <a href="/es/">Español</a> /
        </p>
    </header>
<!--
    <header>
      <p>
      <a href="http://rogerandresgonzalez.com.ve">Index</a> &brvbar; <a href="http://rogerandresgonzalez.com.ve/archives.html">Archives</a>
      </p>
    </header>
-->
<article>
  <div class="article_title">
    <h3><a href="http://rogerandresgonzalez.com.ve/2015/11/como-configurar-tu-primer-proyecto-de-django-parte-II/">¿Cómo configurar tu primer proyecto de Django? Parte II</a></h3>
  </div>
  <div class="article_text">
    <p>Continuando el <a class="reference external" href="http://rogerandresgonzalez.com.ve/2015/10/como-configurar-tu-primer-proyecto-de-django-parte-I/">último tutorial</a>, ya tenemos nuestro proyecto de Django completamente funcional, pero aún nos falta crear nuestra primera <strong>aplicación</strong>.</p>
<p>Nota: El motivo de este tutorial <strong>no</strong> es crear una aplicación, sino aprender lo básico para hacer una aplicación con Django</p>
<div class="section" id="pense-que-eso-es-lo-que-ya-teniamos-que-esta-pasando">
<h2>Pensé que eso es lo que ya teníamos, ¿Qué está pasando?</h2>
<p>Una 'aplicación' de Django no es lo mismo que un 'proyecto' de Django. ¿Por qué? Un proyecto es donde viven tus aplicaciones. En un proyecto puedes tener 'n' aplicaciones, ordenadas y funcionando de forma conjunta. Eso no quiere decir que una aplicación no funcione en otro proyecto, todo lo contrario. El proyecto solo se encarga de mantener tu/tus aplicacion/es ordenada/s y en un mismo sitio.</p>
<p>Para iniciar tu primera aplicación, debes estar en la carpeta del proyecto (donde está <code>manage.py</code>), y teclear lo siguiente:</p>
<div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span>user@pc:~/proyecto/tests<span class="nv">$ </span>python manage.py startapp app_test
</pre></div>
<p>Esto dará inicio a la aplicación &quot;app_test&quot;. si accedemos y hacemos <code>ls</code>, nos va a mostrar su contenido.</p>
<div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span>user@pc:~/proyecto/tests<span class="nv">$ </span><span class="nb">cd </span>app_test
<span class="o">(</span>env<span class="o">)</span>../app_test<span class="nv">$ </span>ls

admin.py
__init__.py
migrations/
models.py
tests.py
views.py
</pre></div>
<p>Vamos a ir viendo para que funciona cada uno de los archivos.</p>
<ul class="simple">
<li><code>admin.py</code>: Aquí se registran todos los modelos que serán manejados desde el <a class="reference external" href="https://docs.djangoproject.com/en/1.8/ref/contrib/admin/">administrador de Django</a>.</li>
<li><code>migrations/</code>: El directorio donde se guardan las migraciones de la base de datos. Por lo general eso no se toca.</li>
<li><code>models.py</code>: En este archivo se escriben todos los modelos que van en nuestra aplicación. Si has trabajado antes con SQL, este es el &quot;esquema de base de datos&quot;.</li>
<li><code>tests.py</code>: Para hacer los tests unitarios.</li>
<li><code>views.py</code>: Aquí van cada una de las vistas de tu aplicación web, eso quiere decir, la lógica de cada pantalla que el usuario va a ver.</li>
</ul>
<p>Ya que sabemos que hace cada uno de los archivos, vamos a 'instalar' nuestra nueva aplicación en el proyecto. En nuestro archivo <code>tests/settings.py</code> agregamos lo siguiente:</p>
<div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="s">&#39;...&#39;</span>
    <span class="s">&#39;app_test&#39;</span><span class="p">,</span> <span class="c"># &lt;----- Añadir nuestra aplicación al final</span>
<span class="p">)</span>
</pre></div>
<p>Ya que nuestra aplicación está correctamente instalada, podemos empezar a hacer <strong>modelos</strong>, <strong>vistas</strong> y <strong>rutas</strong>.</p>
</div>
<div class="section" id="modelos">
<h2>Modelos</h2>
<p>Los <a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/db/models/">modelos</a> son los encargados de crear y mantener nuestra base de datos, independientemente de que motor de base de datos estemos utilizando (MySQL, SQLServer, PostgreSQL, etc.), lo que nos permite cambiar de motor de forma muy rápida.</p>
<p>Para hacer un modelo básico:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">phone</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
<p>Como podemos observar, hay diferentes tipos de campos en nuestro modelo. En el ejemplo solo usamos <code>CharField</code> y <code>EmailField</code> pero hay muchos mas. Siempre tenemos que asegurarnos que estamos usando el correcto. En <a class="reference external" href="https://docs.djangoproject.com/en/1.8/ref/models/fields/#model-field-types">esta lista</a> podemos revisar todos los tipos de fields que tiene Django por defecto.</p>
<p>En Django también podemos establecer <strong>relaciones</strong> entre los modelos (como en las tablas de bases de datos).</p>
<p>Para saber más sobre modelos de Django, te recomiendo <a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/db/models/">esta guia</a> (en inglés).</p>
</div>
<div class="section" id="vistas">
<h2>Vistas</h2>
<p>Las <a class="reference external" href="https://docs.djangoproject.com/en/1.8/topics/http/views/">vistas</a> son las que procesan toda la lógica de lo que sucede cuando el usuario interactúa con la página web. Por ejemplo, el envío de un formulario, la petición de una lista, la edición de una serie de datos, etc.</p>
<p>Una vista básica sería la siguiente:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&#39;Hola mundo!&#39;</span><span class="p">)</span>
</pre></div>
<p>Esta vista solo nos va a devolver &quot;Hola Mundo!&quot;, que quizá no sea lo más interesante del mundo. Vamos a realizar una vista un poco más completa.</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">app_test.models</span> <span class="kn">import</span> <span class="n">Person</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">persons</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;persons&#39;</span> <span class="p">:</span> <span class="n">persons</span><span class="p">})</span>
</pre></div>
<p>En esta vista estamos haciendo varias cosas. Primero, estamos importando nuestro modelo, <code>Person</code>, y <code>render</code>, que nos va a formatear el contexto en una plantilla HTML.</p>
<p>Luego, en nuestra función <code>index</code>, hacemos una búsqueda en nuestra base de datos que nos devuelve a todas las personas. Es lo mismo que hacer un SQL:</p>
<div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Person</span>
</pre></div>
<p>Y por último, retornamos <code>render</code> con el nombre de nuestro template (<code>index.html</code>) y nuestro diccionario (<code>{'persons' : persons}</code>). Más adelante veremos cómo funcionan las vistas en conjunto con los templates.</p>
<p>Para saber mejor cómo funcionan las vistas, te recomiendo <a class="reference external" href="https://docs.djangoproject.com/en/1.8/topics/http/views/">esta página</a> (en inglés)</p>
</div>
<div class="section" id="url-s">
<h2>URL's</h2>
<p>El concepto del URL es básico. ¿Cómo un usuario va a llegar a nuestra flamante y nueva aplicación, si no tienen cómo hacerlo? Aquí es donde llegan las URL. Las URL no son más que la dirección de las páginas de la aplicación. Cada una de las vistas de nuestra aplicación debe tener una URL para que puedan ser accedidas. Por ejemplo, <code>www.miaplicacionweb.com/app-test</code>. Para definir nuestras URL's, tenemos que crear un archivo para colocarlas. En <code>tests/app_test/</code> vamos a crear un archivo que se llame <code>urls.py</code> y vamos a añadir lo siguiente:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">app_test</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^index$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;index&#39;</span><span class="p">),</span>

    <span class="p">)</span>
</pre></div>
<p>Aquí me voy a detener un poco.</p>
<ul class="simple">
<li>Primero, importamos <code>patterns</code> y <code>url</code>, que son necesarios para la creación de URL's, y nuestras vistas.</li>
<li>Luego, creamos nuestros patterns. Cada pattern se compone por un <code>url</code>, que a su vez se compone por:<ul>
<li>Una expresión regular que dice cual es la dirección de la URL. En nuestro caso es &quot;index&quot;</li>
<li>La vista que representa</li>
<li>El nombre para identificar la URL</li>
</ul>
</li>
</ul>
<p>Luego de registrar los URL de la app, hay que registrar los URL del proyecto. En <code>tests/urls.py</code> vamos a modificar lo siguiente:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;app_test.urls&#39;</span><span class="p">)),</span> <span class="c"># &lt;----- Agregar esta linea!</span>
<span class="p">]</span>
</pre></div>
<p>Siguiendo la misma lógica del anterior, el url se compone por:</p>
<ul class="simple">
<li>Una expresión regular que dice cual es la dirección de la URL. En esta caso es ''.</li>
<li>Un include de nuestro archivo de URL's en la aplicación <code>app_test</code></li>
</ul>
<p>Ya que tenemos nuestros URL's configurados, podemos acceder a nuestra vista desde el navegador. Para saber más sobre URL's, puedes investigar en <a class="reference external" href="https://docs.djangoproject.com/en/1.8/topics/http/urls/">este enlace</a> (en inglés)</p>
<p>Solo falta el template para poder renderizar lo que queremos.</p>
</div>
<div class="section" id="templates">
<h2>Templates</h2>
<p>Llegamos a la última parte de este tutorial. Los templates son los archivos <code>.html</code> que se van a visualizar en el navegador. Simple, ¿no?. Para generar contenido dinámico, Django hace uso del lenguaje de templates <a class="reference external" href="http://jinja.pocoo.org/docs/dev/">Jinja2</a>. En nuestro directorio <code>app_test/</code> vamos a crear una carpeta que se llame &quot;templates&quot; y otra que se llame &quot;static&quot;. En &quot;templates&quot; vamos a crear un archivo que se llame <code>index.html</code> y vamos a agregar lo siguiente:</p>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Test page<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hola mundo!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;thead&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;th&gt;</span>Nombre<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>Teléfonos<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>Email<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;th&gt;</span>Dirección<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/thead&gt;</span>
    <span class="nt">&lt;tbody&gt;</span>
    {% for person in persons %}
    <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>{{ person.name }}<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;td&gt;</span>{{ person.phone_num }}<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;td&gt;</span>{{ person.email }}<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;td&gt;</span>{{ person.address }}<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    {% endfor %}
    <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
<p>Para probar todo lo que llevamos, debemos aplicar las migraciones, crear la base de datos y correr el servidor de pruebas.</p>
<div class="highlight"><pre><span class="o">(</span>env<span class="o">)</span>../app_test<span class="nv">$ </span><span class="nb">cd</span> ..
<span class="o">(</span>env<span class="o">)</span>../proyecto/tests<span class="nv">$ </span>python manage.py makemigrations app_test

<span class="c"># Se generan las migraciones</span>

<span class="o">(</span>env<span class="o">)</span>../proyecto/tests<span class="nv">$ </span>python manage.py migrate

<span class="c"># Se crea la base de datos</span>

<span class="o">(</span>env<span class="o">)</span>../proyecto/tests<span class="nv">$ </span>python manage.py createsuperuser

<span class="c"># Se crea el superusuario, lo usaremos en el siguiente paso del tutorial</span>

<span class="o">(</span>env<span class="o">)</span>../proyecto/tests<span class="nv">$ </span>python manage.py runserver

System check identified no issues <span class="o">(</span><span class="m">0</span> silenced<span class="o">)</span>.
November 10, <span class="m">2015</span> - 12:32:06
Django version 1.8.6, using settings <span class="s1">&#39;tests.settings&#39;</span>
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
</pre></div>
<p>Si entramos en la dirección <code>localhost:8000/index</code> o <code>http://127.0.0.1:8000/index</code>, vamos a ver que todo está funcionando correctamente.</p>
<img alt="Aplicación funcionando" src="http://rogerandresgonzalez.com.ve/images/django_tutorial/hello_world.png" />
<p>Tu proyecto ya debería de verse <a class="reference external" href="https://github.com/Rogergonzalez21/django-tutorial/tree/188e15c3058ffd9b7004e880447e6b2146bdf08d">así</a>.</p>
<p>Por ahora todo es muy básico, tenemos un modelo que guarda personas, una vista que devuelve una lista de personas, y un template para mostrar esa vista. En la tercera parte del tutorial vamos a aprender a hacer un formulario para añadir datos, y cómo usar el <a class="reference external" href="https://docs.djangoproject.com/en/1.8/ref/contrib/admin/">administrador de Django</a>.</p>
<p>Hasta la próxima.</p>
</div>

  </div>
  <div class="article_meta">
    <p>Posted on: 10/11/2015</p>
    <p>Category: <a href="http://rogerandresgonzalez.com.ve/category/programacion/">Programación</a>
 &ndash; Tags:
      <a href="http://rogerandresgonzalez.com.ve/tag/django/">django</a>,      <a href="http://rogerandresgonzalez.com.ve/tag/python/">python</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "2015/11/como-configurar-tu-primer-proyecto-de-django-parte-II/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://rogergonzalez21.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; Roger Andrés González. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. Forked and modified by Roger Gonzalez on <a href="https://github.com/Rogergonzalez21/pelican-svbhack" target="_blank">github</a>  </p>
    </div>
  </main>
</body>
</html>